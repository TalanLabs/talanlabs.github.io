const initSearchIndex=a=>{var b={shouldSort:!0,includeMatches:!0,threshold:0,tokenize:!0,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,keys:[{name:"title",weight:.8},{name:"contents",weight:.6},{name:"tags",weight:.3},{name:"categories",weight:.3}]};return new Fuse(a,b)},search=(b,c)=>{const d=c.search(b),e=d.map(({item:a,matches:b})=>({title:a.title,href:a.href,kind:a.kind})),a=new Set,f=e.filter(b=>{const c=a.has(b.href);return a.add(b.href),!c});return f},getArticles=async()=>fetch("/index.json").then(a=>a.json()).catch(a=>{console.error("Error getting index",a)}),autocomplete=(h,f,g)=>{const a=document.getElementById(h),c=document.getElementById(f),d=document.getElementById('results-items'),b=()=>{c.style.display="none",d.innerHTML=''},i=a=>{if(!a.length||a.length==0)return;let b=a.slice(0,30).map(({href:d,title:b,kind:c})=>{const a=document.createElement('a');return a.href=d,a.classList.add('dropdown-item'),a.innerHTML=j(c)+' '+b,a.dataset.kind=c,a.dataset.value=b,a});c.style.display='block',b.map(a=>{d.appendChild(a)})},j=b=>{let a='fa-file';switch(b){case'term':{a='fa-tag';break}case'section':{a='fa-folder';break}}return'<span class="icon"><i class="fas '+a+'"></i></span>'},e=c=>{b();const a=c.target.value;if(a.length<2)return;const d=search(a,g);i(d)};a.addEventListener('focusin',e),a.addEventListener('input',e),a.addEventListener('focusout',a=>{(a.relatedTarget===null||!a.relatedTarget.classList.contains('dropdown-item'))&&b()})},init=async()=>{const a=await getArticles(),b=initSearchIndex(a);autocomplete('search','results',b)};document.addEventListener("DOMContentLoaded",()=>{init()})