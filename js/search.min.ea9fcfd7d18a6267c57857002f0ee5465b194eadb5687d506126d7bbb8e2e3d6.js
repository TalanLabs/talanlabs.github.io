const initSearchIndex=e=>{var t={shouldSort:!0,includeMatches:!0,threshold:0,tokenize:!0,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,keys:[{name:"title",weight:.8},{name:"contents",weight:.6},{name:"tags",weight:.3},{name:"categories",weight:.3}]};return new Fuse(e,t)},search=(e,t)=>{const s=t.search(e),o=s.map(({item:e,matches:t})=>({title:e.title,href:e.href,kind:e.kind})),n=new Set,i=o.filter(e=>{const t=n.has(e.href);return n.add(e.href),!t});return i},getArticles=async()=>fetch("/index.json").then(e=>e.json()).catch(e=>{console.error("Error getting index",e)}),autocomplete=(e,t,n)=>{const s=document.getElementById(e),o=document.getElementById(t),i=document.getElementById("results-items"),a=()=>{o.style.display="none",i.innerHTML=""},c=e=>{if(!e.length||e.length==0)return;let t=e.slice(0,30).map(({href:e,title:t,kind:n})=>{const s=document.createElement("a");return s.href=e,s.classList.add("dropdown-item"),s.innerHTML=l(n)+" "+t,s.dataset.kind=n,s.dataset.value=t,s});o.style.display="block",t.map(e=>{i.appendChild(e)})},l=e=>{let t="fa-file";switch(e){case"term":{t="fa-tag";break}case"section":{t="fa-folder";break}}return'<span class="icon"><i class="fas '+t+'"></i></span>'},r=e=>{a();const t=e.target.value;if(t.length<2)return;const s=search(t,n);c(s)};s.addEventListener("focusin",r),s.addEventListener("input",r),s.addEventListener("focusout",e=>{(e.relatedTarget===null||!e.relatedTarget.classList.contains("dropdown-item"))&&a()})},init=async()=>{const e=await getArticles(),t=initSearchIndex(e);autocomplete("search","results",t)};document.addEventListener("DOMContentLoaded",()=>{init()})